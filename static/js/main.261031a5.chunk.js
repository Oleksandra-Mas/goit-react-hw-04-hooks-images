(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{13:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__s54EB","ImageGalleryItem-image":"ImageGalleryItem_ImageGalleryItem-image__2_Lba"}},14:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2zlvi",Modal:"Modal_Modal__oJvAb"}},25:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__5Sk85"}},26:function(e,t,a){e.exports={Button:"Button_Button__3Os7T"}},28:function(e,t,a){e.exports={Loader:"Loader_Loader__ypQJt"}},37:function(e,t,a){},38:function(e,t,a){},7:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__2ytC5",SearchForm:"Searchbar_SearchForm__1pn79","SearchForm-button":"Searchbar_SearchForm-button__1hVVL","SearchForm-button-label":"Searchbar_SearchForm-button-label__19I4m","SearchForm-input":"Searchbar_SearchForm-input__1IB5D"}},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),s=(a(37),a(16)),i=a(4),u=a(5),l=(a(38),a(13)),h=a.n(l),b=a(1);function m(e){var t=e.toggleModal,a=e.webImage,n=e.largeImage,r=e.tags;return Object(b.jsx)("li",{className:h.a.ImageGalleryItem,onClick:function(e){var a=e.target,n=a.dataset,r=a.alt;t({url:n.value,alt:r})},children:Object(b.jsx)("img",{className:h.a["ImageGalleryItem-image"],src:a,alt:r,"data-value":n})})}var g=a(25),j=a.n(g);function f(e){var t=e.toggleModal,a=e.photos;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("ul",{className:j.a.ImageGallery,children:a.map((function(e,a){var n=e.largeImageURL,r=e.webformatURL,c=e.tags;return Object(b.jsx)(m,{webImage:r,largeImage:n,tags:c,toggleModal:t},a)}))})})}var p=a(14),d=a.n(p),O=document.querySelector("#modal-root");function v(e){var t=e.onClose,a=e.searchImage,r=a.url,o=a.alt;Object(n.useEffect)((function(){return window.addEventListener("keydown",s),function(){window.removeEventListener("keydown",s)}}),[]);var s=function(e){"Escape"===e.code&&t(null)};return Object(c.createPortal)(Object(b.jsx)("div",{className:d.a.Overlay,onClick:function(e){e.currentTarget===e.target&&t(null)},children:Object(b.jsx)("div",{className:d.a.Modal,children:Object(b.jsx)("img",{src:r,alt:o})})}),O)}var y=a(26),_=a.n(y);var x=function(e){var t=e.onClick;return Object(b.jsx)("button",{type:"button",className:_.a.Button,onClick:t,children:"Load more"})},S=a(27),I=a.n(S),w=a(28),k=a.n(w);function F(){return Object(b.jsx)(I.a,{className:k.a.Loader,type:"BallTriangle",color:"#3f51b5",height:100,width:100,timeout:1e4})}var N=a(7),C=a.n(N);function L(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(i.a)(a,2),c=r[0],o=r[1];return Object(b.jsx)("header",{className:C.a.Searchbar,children:Object(b.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""===c.trim())return u.b.error("Empty input");t(c),o("")},className:C.a.SearchForm,children:[Object(b.jsx)("button",{type:"submit",className:C.a["SearchForm-button"],children:Object(b.jsx)("span",{className:C.a["SearchForm-button-label"],children:"Search"})}),Object(b.jsx)("input",{className:C.a["SearchForm-input"],type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){var t=e.target.value.toLowerCase();o(t)}})]})})}var G=a(29),B=a(30),E=a(31),M=a(15),P=a.n(M),Q=a(32),T=a.n(Q),J=function(){function e(){Object(B.a)(this,e),this.searchQuery="",this.page=1}return Object(E.a)(e,[{key:"searchPhoto",value:function(){var e=Object(G.a)(P.a.mark((function e(){var t,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://pixabay.com/api","/?q=").concat(this.searchQuery,"&page=").concat(this.page,"&key=").concat("23883543-c0e8a740f16e18e27aeb57e6b","&image_type=photo&orientation=horizontal&per_page=12"),e.next=3,T.a.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"incrementPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}},{key:"setPage",value:function(e){this.page=e}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}]),e}();a(79);function q(){return Object(b.jsx)(u.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})}var z=new J,A="idle",D="pending",H="resolved",R="end";function U(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(i.a)(c,2),l=o[0],h=o[1],m=Object(n.useState)(!1),g=Object(i.a)(m,2),j=g[0],p=g[1],d=Object(n.useState)(A),O=Object(i.a)(d,2),y=O[0],_=O[1],S=Object(n.useState)([]),I=Object(i.a)(S,2),w=I[0],k=I[1],N=Object(n.useState)(1),C=Object(i.a)(N,2),G=C[0],B=C[1],E=function(e){p((function(e){return!e})),h(e)};Object(n.useEffect)((function(){a&&(z.resetPage(),B(z.page),_(D),z.searchQuery=a,z.searchPhoto().then((function(e){if(0===e.hits.length)return _(A),u.b.warning("Nothing found");k(e.hits),_(H)})))}),[a]),Object(n.useEffect)((function(){1!==G&&(_(D),z.searchPhoto().then((function(e){if(0===e.hits.length)return _(R),u.b.warning("Nothing else found");k((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e.hits))})),_(H),setTimeout((function(){window.scrollBy({top:document.documentElement.clientHeight,behavior:"smooth"})}),400)})))}),[G]);return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(L,{onSubmit:r}),(y===D&&1!==G||y===H||y===R)&&Object(b.jsx)(f,{toggleModal:E,photos:w}),y===H&&Object(b.jsx)(x,{onClick:function(){z.incrementPage(),B(z.page)}}),y===D&&Object(b.jsx)(F,{}),Object(b.jsx)(q,{}),j&&Object(b.jsx)(v,{searchImage:l,onClose:E})]})}o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(U,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.261031a5.chunk.js.map